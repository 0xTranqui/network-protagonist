# ================================
# ======== ID REGISTRY ===========
# ================================

type IdRegistry @entity {
  id: String!
  to: String
  from: String
  userId: BigInt
  backup: Bytes
  data: String
  attestor: String
}

# ================================
# ====== DELEGATE REGISTRY =======
# ================================

type DelegateRegistry @entity {
  id: String!
  userId: BigInt!
  transferNonce: BigInt!
  target: String!
  status: Boolean!
}

# ================================
# ======== NODE REGISTRY =========
# ================================

type Schema @entity {
  id: String!
  sender: String!
  schema: Bytes!
  data: Bytes
}

type Register @entity {
  id: String!
  sender: String
  nodeId: BigInt
  schema: Bytes
  messages: [Bytes]
}

type Node @entity {
  id: String!
  sender: String!
  userId: BigInt!
  schema: String!
  nodeId: BigInt!
  msgType: BigInt
  msgBody: Bytes
  accessControl: AccessControl

}

type AccessControl @entity {
  id: String!
  nodeAdmin: [BigInt!]!
  nodeMembers: [BigInt!]!
  node: Node!

}

type Message @entity {
  id: String!
  sender: String
  userId: BigInt
  msgType: BigInt
  msgBody: Bytes
}

type Call @entity {
  id: String!
  sender: String!
  nodeId: BigInt!
  schema: Bytes!
  userId: BigInt!
  msgType: BigInt!
  msgBody: Bytes!
}

type Publication @entity {
  id: String!
  uri: String!
}

type Item @entity {
  id: String!
  chainId: BigInt!
  targetId: BigInt!
  target: String!
  hasId: Boolean!
  channel: Channel!
}

type Channel @entity {
  id: String!
  uri: String
  items: [Item!]! @derivedFrom(field: "channel")
}

# ================================
# ====== RIVER VALIDATOR V1 ======
# ================================

type RiverValidatorV1 @entity {
  id: String!
  userId: BigInt
  status: Boolean
  operator: String
}